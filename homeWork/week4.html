<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>자바스크립트 과제 4주차</title>
	<link rel="stylesheet" type="text/css" href="qunit-1.17.1.css">
	<script src="jquery-1.11.2.min.js"></script>
	<script>jQuery.noConflict();</script>
	<script>
	/*
	 * 아래에 과제 코드를 입력합니다.
	 *
	 * 온라인에서 볼 수 있도록 자신의 GitHub에 올려둔 후 이 파일의 링크를 메일로 보내면 됩니다.
	 * 테스트 케이스가 작성되어 있으므로 자신의 답이 맞았는지 틀렸는지 바로 확인할 수 있습니다.
	 * 수업이 있던 날 다음 주 수요일 0시까지 제출하는 사람에겐 1:1로 피드백을 드리고,
	 * 다음 주 토요일 0시까지 제출하는 사람에겐 점수와 틀린 부분에 대한 정답 예제 코드를 드립니다.
	 */

	// 문제1: 인수로 전달한 우편번호가 올바른 형식인지 확인하여 올바르면 true 그렇지 않으면 false를 반환하는
	// isZipCode() 함수를 작성하라. 단, 우편번호는 다음과 같은 조건을 만족해야 한다.
	//   1. 숫자 세 자리와 '-' 그리고 숫자 세 자리로만 구성된다.
	//   2. 가장 처음 숫자는 0이 될 수 없다. 예) 011-023 (x), 101-023 (o)
	// 사용예:
	//   isZipCode('200-333) // true 반환
	//   isZipCode('200-33') // false 반환
        function isZipCode(num) {
            var regex = /^[1-9]\d{2}\-\d{3}$/;
            return regex.test(num);
        };
	// 문제2: 인수로 전달한 아이디를 가진 입력 폼에 "성공!"이라는 문자열을 출력하는 성공() 함수를 작성하라.
	// 사용예:
	//    성공('text1');
    //  답 2-1. 2번 테스트를 통과 못한다... 왜 안되지...
        function 성공 (id) {
            var form = document.getElementById(id);
            return form.setAttribute('value', '성공!');
        }

    // 답 2-2. 왜 안 되지....
//        function 성공 (id) {
//            jQuery (function ($){
//                $( id ).attr( 'value', '성공!')
//                console.log(id);
//            });
//        };
        
	// 문제3: jQuery를 사용해 아이디가 box인 엘리먼트에 이벤트 리스너를 추가하라.
	// 단, 상자는 그냥 클릭하면 오른쪽으로 10픽셀 이동하고 Alt 키를 누른채 클릭하면 왼쪽으로 10픽셀 이동해야 한다.
	// 힌트1: 이벤트 객체의 altKey 프로퍼티를 사용하면 Alt 키가 눌렸는지 확인할 수 있습니다.
	// 힌트2: 문자열을 숫자로 변환하는 과정이 필요할 것입니다.

//     답 3-1.
//        jQuery (function ($) {
//            $('#box').on('click', function (event) {
//                var style = $('#box').attr('style');
//                var props = style.split(';');
//                var regex = /\d+/;
//                var value = regex.exec(props[2]);
//                
//                if ( event.altKey) {
//                    value = +value - 10;
//                } else {
//                    value = +value + 10;
//                }
//                style = $('#box').attr('style', props[0]+';'+props[1]+';'+'left:'+value+'px;'+props[3]+';'+props[4]+';'+props[5]);
//            });
//        });
        
//      답 3-2. value의 어느 위치에 'left'값이 있는지 모를 때에도 쓸 수 있게 수정.
//        jQuery (function ($) {
//            var style = $( '#box' ).attr( 'style' );
//            var props = style.split( ';' );
//
//            for ( var i = 0; i < props.length; i++ ) {
//                if ( props[i].substr(0, 5) === 'left:' ) {
//                var regex = /\d+/;
//                var value = regex.exec(props[i]);
//                var arrNum = i;
//                }
//            }
//            $( '#box' ).on( 'click', function (event) {
//                if (event.altKey) {
//                value = +value - 10;
//                } else {
//                value = +value + 10;
//                }
//                props[arrNum] = 'left:'+value+'px;';
//                $( '#box' ).attr( 'style', props.join(';') );
//                });
//        });
        
//      답 3-3. left부분을 추출해내는 방법을 정규표현식으로 수정.
        jQuery (function ($) {
            var style = $( '#box' ).attr( 'style' );
            var props = style.split( ';' );

            for ( var i = 0; i < props.length; i++ ) {
                var regexLeft = /left\:/;
                if ( regexLeft.test(props[i]) === true ) {
                var regex = /\d+/;
                var value = regex.exec(props[i]);
                var arrNum = i;
                }
            }
            $( '#box' ).on( 'click', function (event) {
                if (event.altKey) {
                value = +value - 10;
                } else {
                value = +value + 10;
                }
                props[arrNum] = 'left:'+value+'px;';
                $( '#box' ).attr( 'style', props.join(';') );
                });
        });        
        
	</script>
</head>
<body>
	<div id="qunit"></div>
	<div id="qunit-fixture"></div>
	<script src="qunit-1.17.1.js"></script>
	<script src="week4.js"></script>

	<div id="box" style="position:absolute;top:10px;left:300px;width:30px;height:30px;background-color:red"></div>

	<div id="content" style="height:0;overflow:hidden">
		<form name="search">
			<input type="text" name="search" id="search-search" placeholder="검색어">
			<input type="submit" value="검색">
		</form>
		<form>
			<input type="checkbox" name="check"><label>체크1</label>
			<input type="checkbox" name="check"><label>체크2</label>
			<input type="text" name="name" id="name" value="" placeholder="이름">
			<textarea name="content" placeholder="내용"></textarea>
		</form>
		<button type="submit">전송</button>
	</div>
</body>
</html>
